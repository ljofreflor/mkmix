<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>What the Package Does (One Line, Title Case) • mkmix</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="What the Package Does (One Line, Title Case)">
<meta property="og:description" content="What the package does (one paragraph).">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">mkmix</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    

    
    
<!-- README.md is generated from README.Rmd. Please edit that file -->
<div id="mkmix" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#mkmix" class="anchor"></a>mkmix</h1></div>
<p>El objetivo de mkmix es un modelo mixto bayesiano, aplicable al caso muy particular de estimación de elasticidad en retail.</p>
<div id="instalacion" class="section level2">
<h2 class="hasAnchor">
<a href="#instalacion" class="anchor"></a>Instalación</h2>
<p>Puede instalar la versión de desarrollo <a href="https://github.com/">GitHub</a> con:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># install.packages("devtools")</span>
devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(<span class="st">"ljofre/mkmix"</span>)</code></pre></div>
</div>
<div id="example" class="section level2">
<h2 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h2>
<p>este es un pequeño ejemplo de como usar la librería para nuestro set de prueba. La libreria mkmix provee un set de datos ‘consumo’ que son datos reales de cantidad vendida, precio, promociones y canales del retail X.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(mkmix)
<span class="kw">library</span>(knitr)

estimate.mode &lt;-<span class="st"> </span><span class="cf">function</span>(x) {
  temp &lt;-<span class="st"> </span><span class="kw">density</span>(x)
  temp<span class="op">$</span>x[<span class="kw">which.max</span>(temp<span class="op">$</span>y)]
}

<span class="kw">data</span>(<span class="st">"consumo"</span>)

sales.data &lt;-<span class="st"> </span>mkmix<span class="op">::</span><span class="kw">get.mkmix.object</span>(<span class="dt">data.frame.in =</span> consumo,
                                      <span class="dt">fixed.effects =</span> <span class="kw">c</span>(<span class="st">"PRENSA"</span>,
                                                        <span class="st">"TV"</span>,
                                                        <span class="st">"CATALOGO"</span>),
                                      <span class="dt">random.effect =</span> <span class="st">"RUBRO_MARCA"</span>,
                                      <span class="dt">log.p =</span> <span class="st">"lP"</span>,
                                      <span class="dt">log.q =</span> <span class="st">"lQ"</span>)

mcmc.sample &lt;-<span class="st"> </span>mkmix<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/mkmix/topics/constrained.mixed.model.mcmc">constrained.mixed.model.mcmc</a></span>(<span class="dt">n.iter =</span> <span class="dv">10000</span>,
                                                   <span class="dt">data =</span> sales.data)</code></pre></div>
<p>las estimaciones se obtienen obteniendo la moda de la distribución posterior.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ee &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dt">nrow =</span> <span class="kw">ncol</span>(mcmc.sample<span class="op">$</span>chain.eta))
<span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">ncol</span>(mcmc.sample<span class="op">$</span>chain.eta)) {
  ee[i,<span class="dv">1</span>] &lt;-<span class="kw">estimate.mode</span>(mcmc.sample<span class="op">$</span>chain.eta[,i])
}</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">bb &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dt">nrow =</span> <span class="kw">ncol</span>(mcmc.sample<span class="op">$</span>chain.beta))
<span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">ncol</span>(mcmc.sample<span class="op">$</span>chain.beta)) {
  bb[i,<span class="dv">1</span>] &lt;-<span class="kw">estimate.mode</span>(mcmc.sample<span class="op">$</span>chain.beta[,i])
}</code></pre></div>
<p>las cuales generan los siguientes resultados</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">colnames</span>(ee) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"random.effects"</span>)
<span class="kw"><a href="http://www.rdocumentation.org/packages/knitr/topics/kable">kable</a></span>(ee, <span class="dt">caption =</span> <span class="st">"estimacion de efectos aleatorios de subrubro marca"</span>)</code></pre></div>
<table class="table">
<caption>estimacion de efectos aleatorios de subrubro marca</caption>
<thead><tr class="header">
<th align="right">random.effects</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">0.3468587</td>
</tr>
<tr class="even">
<td align="right">0.7872366</td>
</tr>
<tr class="odd">
<td align="right">0.3169200</td>
</tr>
<tr class="even">
<td align="right">1.7247173</td>
</tr>
<tr class="odd">
<td align="right">0.1385529</td>
</tr>
<tr class="even">
<td align="right">-0.4666918</td>
</tr>
<tr class="odd">
<td align="right">-0.2157758</td>
</tr>
<tr class="even">
<td align="right">0.6391289</td>
</tr>
<tr class="odd">
<td align="right">-0.2587237</td>
</tr>
<tr class="even">
<td align="right">-1.4683210</td>
</tr>
<tr class="odd">
<td align="right">-0.4598644</td>
</tr>
<tr class="even">
<td align="right">1.4920903</td>
</tr>
<tr class="odd">
<td align="right">0.1525955</td>
</tr>
<tr class="even">
<td align="right">1.5397987</td>
</tr>
<tr class="odd">
<td align="right">-0.0320211</td>
</tr>
<tr class="even">
<td align="right">-1.6109181</td>
</tr>
<tr class="odd">
<td align="right">0.0354692</td>
</tr>
<tr class="even">
<td align="right">-0.2004138</td>
</tr>
<tr class="odd">
<td align="right">0.4176171</td>
</tr>
<tr class="even">
<td align="right">4.4744030</td>
</tr>
<tr class="odd">
<td align="right">-0.0290799</td>
</tr>
<tr class="even">
<td align="right">-0.9468433</td>
</tr>
<tr class="odd">
<td align="right">-0.1735733</td>
</tr>
<tr class="even">
<td align="right">0.7411779</td>
</tr>
<tr class="odd">
<td align="right">0.1640266</td>
</tr>
<tr class="even">
<td align="right">0.7708589</td>
</tr>
<tr class="odd">
<td align="right">0.1048988</td>
</tr>
<tr class="even">
<td align="right">-0.6860053</td>
</tr>
<tr class="odd">
<td align="right">0.0254518</td>
</tr>
<tr class="even">
<td align="right">0.8740192</td>
</tr>
<tr class="odd">
<td align="right">0.2260368</td>
</tr>
<tr class="even">
<td align="right">1.4439564</td>
</tr>
<tr class="odd">
<td align="right">0.0146529</td>
</tr>
<tr class="even">
<td align="right">0.4756617</td>
</tr>
<tr class="odd">
<td align="right">0.0316645</td>
</tr>
<tr class="even">
<td align="right">-0.6757599</td>
</tr>
<tr class="odd">
<td align="right">-0.0387298</td>
</tr>
<tr class="even">
<td align="right">-2.5571553</td>
</tr>
<tr class="odd">
<td align="right">-0.1987925</td>
</tr>
<tr class="even">
<td align="right">-1.3288248</td>
</tr>
<tr class="odd">
<td align="right">0.0525157</td>
</tr>
<tr class="even">
<td align="right">-1.0726266</td>
</tr>
<tr class="odd">
<td align="right">-0.1820207</td>
</tr>
<tr class="even">
<td align="right">-1.2837808</td>
</tr>
<tr class="odd">
<td align="right">-0.1688614</td>
</tr>
<tr class="even">
<td align="right">1.4716799</td>
</tr>
<tr class="odd">
<td align="right">-0.2390915</td>
</tr>
<tr class="even">
<td align="right">-0.6130675</td>
</tr>
</tbody>
</table>
<p>y también</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">colnames</span>(bb) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"fixed.effects"</span>)
<span class="kw"><a href="http://www.rdocumentation.org/packages/knitr/topics/kable">kable</a></span>(bb, <span class="dt">caption =</span> <span class="st">"estimacion de efectos fijos de canales de promoción: intercepto, prensa, tv, catálogo "</span>)</code></pre></div>
<table class="table">
<caption>estimacion de efectos fijos de canales de promoción: intercepto, prensa, tv, catálogo</caption>
<thead><tr class="header">
<th align="right">fixed.effects</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">2.2492808</td>
</tr>
<tr class="even">
<td align="right">-0.2191471</td>
</tr>
<tr class="odd">
<td align="right">0.4365452</td>
</tr>
<tr class="even">
<td align="right">0.0845543</td>
</tr>
</tbody>
</table>
<p>se pueden visualizar las cadenas</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># canera para el segundo efecto fijo (el primero es el intercepto)</span>
<span class="kw">plot</span>(mcmc.sample<span class="op">$</span>chain.beta[,<span class="dv">2</span>], <span class="dt">type=</span><span class="st">'l'</span>)</code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-5-1.png" width="100%"></p>
<p>y distribuciones posteriores</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># densidad empirita del 4 efecto aleatorio de la pendiente </span>
den.eta.<span class="fl">4.</span>slope &lt;-<span class="st"> </span><span class="kw">density</span>(mcmc.sample<span class="op">$</span>chain.eta[,<span class="dv">8</span>])
<span class="kw">plot</span>(den.eta.<span class="fl">4.</span>slope)</code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-6-1.png" width="100%"></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Report a bug at <br><a href="NA">NA</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>First Last <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>

      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by First Last.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
